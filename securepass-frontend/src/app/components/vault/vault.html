<!-- src/app/components/vault/vault.html -->
<div class="container">
  <!-- Header (navbar sits above in app) -->

  <!-- Top Action Buttons - Will be positioned by CSS -->
  <div class="top-actions">
    <!-- Refresh button (below add button) -->
    <button 
      class="fab-btn refresh-fab" 
      (click)="refreshCredentials()"
      [disabled]="refreshing"
      title="Refresh credentials"
      aria-label="Refresh credentials">
      <svg class="refresh-icon" [class.spinning]="refreshing" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="23 4 23 10 17 10"></polyline>
        <polyline points="1 20 1 14 7 14"></polyline>
        <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
      </svg>
    </button>
  </div>

  <!-- Stats Header -->
  <div class="stats-row">
    <div class="stats" role="region" aria-label="Vault statistics">
      <div class="stat" (click)="onStatClick('total')" [class.active]="!showOnlyWeak">
        <div class="stat-content">
          <div class="stat-title">Total Accounts</div>
          <div class="stat-number">{{ totalAccounts }}</div>
        </div>
      </div>

      <div class="stat stat-weak" (click)="onStatClick('weak')" [class.active]="showOnlyWeak">
        <div class="stat-content">
          <div class="stat-title">Weak Passwords</div>
          <div class="stat-number">{{ needUpdates }}</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Credentials List -->
  <div class="cards-container" *ngIf="filteredCredentials.length > 0">
    <app-credential-card
      *ngFor="let cred of filteredCredentials; trackBy: trackById"
      [credential]="cred"
      (onDelete)="askDelete($event)"
      (onEdit)="onEditCredential($event)"
      (onCopy)="handleCopy($event)"
      (onToggle)="handleToggle($event)">
    </app-credential-card>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="filteredCredentials.length === 0">
    <div class="empty-message">
      <p *ngIf="searchTerm || showOnlyWeak">
        No credentials found matching your filters.
      </p>
      <p *ngIf="!searchTerm && !showOnlyWeak">
        Your vault is empty. Click the ï¼‹ button to add your first credential.
      </p>
    </div>
  </div>
