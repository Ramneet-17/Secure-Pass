<!-- credential-form.html (vertical stacked fields) -->
<form #credentialForm="ngForm" (ngSubmit)="onSubmit(credentialForm)" class="credential-form-vertical">
  <div class="form-title">{{ editCredential ? 'Edit Credential' : 'Add New Credential' }}</div>

  <div class="field">
    <label for="site">Site</label>
    <input 
      id="site" 
      class="form-control" 
      [class.readonly]="editCredential"
      placeholder="example.com"
      [(ngModel)]="site" 
      name="site" 
      #siteInput="ngModel"
      [readonly]="editCredential"
      [required]="true"
      [minlength]="1" />
    <div class="invalid-feedback" *ngIf="siteInput.invalid && (siteInput.dirty || siteInput.touched)">
      Site is required
    </div>
  </div>

  <div class="field">
    <label for="username">Username</label>
    <input 
      id="username" 
      class="form-control" 
      [class.readonly]="editCredential"
      placeholder="your_username"
      [(ngModel)]="username" 
      name="username" 
      #usernameInput="ngModel"
      [readonly]="editCredential"
      [required]="true"
      [minlength]="1" />
    <div class="invalid-feedback" *ngIf="usernameInput.invalid && (usernameInput.dirty || usernameInput.touched)">
      Username is required
    </div>
  </div>

  <div class="field">
    <label for="password">Password</label>
    <div class="password-input-group">
      <input 
        id="password" 
        [type]="showPassword ? 'text' : 'password'" 
        class="form-control" 
        [placeholder]="editCredential ? 'Leave empty to keep current password' : 'Choose a strong password'"
        [(ngModel)]="password" 
        name="password" 
        #passwordInput="ngModel"
        [required]="!editCredential"
        [minlength]="editCredential ? 0 : 1"
        (input)="onPasswordInput()" />
      <button 
        type="button" 
        class="password-toggle-btn" 
        (click)="toggleShowPassword()"
        [attr.aria-label]="showPassword ? 'Hide password' : 'Show password'"
        title="{{ showPassword ? 'Hide password' : 'Show password' }}">
        {{ showPassword ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸' }}
      </button>
    </div>
    <div class="password-actions">
      <button 
        type="button" 
        class="btn btn-sm btn-secondary" 
        (click)="generatePassword()"
        title="Generate strong password">
        ğŸ”‘ Generate Password
      </button>
      <button 
        type="button" 
        class="btn btn-sm btn-secondary" 
        (click)="copyPassword()"
        *ngIf="password || generatedPassword"
        title="Copy password to clipboard">
        ğŸ“‹ Copy
      </button>
    </div>
    <div class="password-strength" *ngIf="password || generatedPassword">
      <div class="strength-label">Strength: {{ passwordStrengthLabel(effectivePassword()) }}</div>
      <div class="strength-bar">
        <div class="strength-fill" [style.width.%]="passwordScore(effectivePassword())" 
             [ngClass]="{'weak': passwordScore(effectivePassword()) < 50, 'medium': passwordScore(effectivePassword()) >= 50 && passwordScore(effectivePassword()) < 80, 'strong': passwordScore(effectivePassword()) >= 80}">
        </div>
      </div>
    </div>
    <div class="invalid-feedback" *ngIf="passwordInput.invalid && (passwordInput.dirty || passwordInput.touched) && !editCredential">
      Password is required
    </div>
  </div>

  <div class="actions-row">
    <button class="btn btn-primary" type="submit" [disabled]="!credentialForm.form.valid">
      {{ editCredential ? 'Update' : 'Add' }}
    </button>

    <button type="button" class="btn btn-secondary" (click)="cancel()" *ngIf="editCredential">
      Cancel
    </button>
  </div>
</form>
