# Default/Production configuration
# This is used when no profile is active or when using production
# For development, use SPRING_PROFILES_ACTIVE=dev to use application-dev.yml

server:
  port: 8081

app:
  cors:
    # Set CORS_ALLOWED_ORIGINS environment variable
    # Example: CORS_ALLOWED_ORIGINS=https://app.yourdomain.com
    allowed-origins:
      - ${CORS_ALLOWED_ORIGINS:https://yourdomain.com}

spring:
  application:
    name: securepass
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 10MB
  http:
    encoding:
      enabled: true
      charset: UTF-8
      force: true
  datasource:
    url: ${POSTGRES_URL}
    username: ${POSTGRES_USER}
    password: ${POSTGRES_PASSWORD}
    driver-class-name: org.postgresql.Driver
  jpa:
    hibernate:
      ddl-auto: validate  # Validate schema only - never auto-update in production
    show-sql: false  # Never show SQL in production logs
    properties:
      hibernate:
        format_sql: false
        use_sql_comments: false
        jdbc:
          batch_size: 20
        order_inserts: true
        order_updates: true
    database-platform: org.hibernate.dialect.PostgreSQLDialect

# JWT config - MUST be set via environment variable in production
# Dev profile provides defaults in application-dev.yml
jwt:
  secret: ${JWT_SECRET:REQUIRED_IN_PRODUCTION}  # REQUIRED in production: Set JWT_SECRET env variable (min 256 bits/32 chars)
  expiration: ${JWT_EXPIRATION:86400000}  # 1 Day expiration

# AES config - MUST be set via environment variable in production
# Dev profile provides defaults in application-dev.yml
aes:
  secret-key: ${AES_SECRET_KEY:REQUIRED_IN_PRODUCTION}  # REQUIRED in production: Set AES_SECRET_KEY env variable (16, 24, or 32 bytes)

logging:
  level:
    root: WARN  # Only warnings and errors in production
    com.securepass: INFO  # Info level for application
    org.springframework.security: WARN  # Security warnings only
    org.hibernate: WARN  # Hibernate warnings only
  # Configure log file output for production
  file:
    name: ${LOG_FILE_PATH:/var/log/securepass/application.log}
    max-size: 10MB
    max-history: 30
  pattern:
    file: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"
